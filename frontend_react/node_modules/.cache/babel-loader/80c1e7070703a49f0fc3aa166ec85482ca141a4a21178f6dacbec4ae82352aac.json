{"ast":null,"code":"var _jsxFileName = \"D:\\\\moy_silant-main\\\\frontend_react\\\\src\\\\Components\\\\Auth\\\\LoginForm.js\",\n  _s = $RefreshSig$();\nimport React, { useRef } from 'react';\nimport { Alert, Button, Form } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport MainAPI from \"../../API/MainAPI\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LoginForm = () => {\n  _s();\n  const dispatch = useDispatch();\n  const current_user = useSelector(state => state.current_user);\n  const username_form = useRef();\n  const password_form = useRef();\n  const remember_user = useRef();\n  const show_auth_info = (show, text) => {\n    dispatch({\n      type: \"SHOW_INFO\",\n      payload: {\n        show: show,\n        text: text\n      }\n    });\n  };\n  async function submit(e) {\n    e.preventDefault();\n    let login = await MainAPI.login(username_form.current.value, password_form.current.value);\n    if (login.authenticated) {\n      dispatch({\n        type: \"AUTHORISATION_SUCCESS\",\n        payload: login\n      });\n      if (remember_user.current.checked) {\n        localStorage.setItem('current_user', JSON.stringify(login));\n      }\n      setTimeout(() => dispatch({\n        type: \"SHOW_AUTH_MODAL\"\n      }), 1000);\n    } else {\n      dispatch({\n        type: \"SHOW_INFO\",\n        payload: {\n          show: true,\n          text: 'Ошибка авторизации. Логин или пароль не верны'\n        }\n      });\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: current_user.authenticated ? `Добро пожаловать ${current_user.username}!` : /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: e => submit(e),\n      children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3\",\n        controlId: \"username\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"\\u041B\\u043E\\u0433\\u0438\\u043D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          ref: username_form,\n          type: \"text\",\n          placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043B\\u043E\\u0433\\u0438\\u043D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n          className: \"text-muted\",\n          children: \"\\u041B\\u043E\\u0433\\u0438\\u043D \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F \\u0432\\u044B\\u0434\\u0430\\u0435\\u0442\\u0441\\u044F \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u043E\\u043C.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3\",\n        controlId: \"password\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          ref: password_form,\n          type: \"password\",\n          placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3\",\n        controlId: \"formBasicCheckbox\",\n        children: /*#__PURE__*/_jsxDEV(Form.Check, {\n          ref: remember_user,\n          type: \"checkbox\",\n          label: \"\\u0417\\u0430\\u043F\\u043E\\u043C\\u043D\\u0438\\u0442\\u044C \\u043D\\u0430 \\u044D\\u0442\\u043E\\u043C \\u0443\\u0441\\u0442\\u0440\\u043E\\u0439\\u0441\\u0442\\u0432\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        type: \"submit\",\n        children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 17\n    }, this)\n  }, void 0, false);\n};\n_s(LoginForm, \"tBVysmRNFATcuxKdqe4afyGjjY0=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = LoginForm;\nexport default LoginForm;\nvar _c;\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"names":["React","useRef","Alert","Button","Form","useDispatch","useSelector","MainAPI","LoginForm","dispatch","current_user","state","username_form","password_form","remember_user","show_auth_info","show","text","type","payload","submit","e","preventDefault","login","current","value","authenticated","checked","localStorage","setItem","JSON","stringify","setTimeout","username"],"sources":["D:/moy_silant-main/frontend_react/src/Components/Auth/LoginForm.js"],"sourcesContent":["import React, {useRef} from 'react';\nimport {Alert, Button, Form} from \"react-bootstrap\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport MainAPI from \"../../API/MainAPI\";\n\nconst LoginForm = () => {\n    const dispatch = useDispatch()\n    const current_user = useSelector(state => state.current_user)\n    const username_form = useRef()\n    const password_form = useRef()\n    const remember_user = useRef()\n\n    const show_auth_info = (show, text) => {\n        dispatch({type: \"SHOW_INFO\", payload: {show: show, text: text}})\n    }\n\n    async function submit(e) {\n        e.preventDefault()\n        let login = await MainAPI.login(username_form.current.value, password_form.current.value)\n        if (login.authenticated) {\n            dispatch({type: \"AUTHORISATION_SUCCESS\", payload: login})\n            if (remember_user.current.checked) {\n                localStorage.setItem('current_user', JSON.stringify(login))\n            }\n            setTimeout(() => dispatch({type: \"SHOW_AUTH_MODAL\"}), 1000)\n        } else {\n            dispatch({\n                type: \"SHOW_INFO\", payload: {\n                    show: true,\n                    text: 'Ошибка авторизации. Логин или пароль не верны'\n                }\n            })\n        }\n    }\n\n    return (\n        <>\n            {current_user.authenticated ?\n                `Добро пожаловать ${current_user.username}!` :\n                <Form onSubmit={(e) => submit(e)}>\n                    <Form.Group className=\"mb-3\" controlId=\"username\">\n                        <Form.Label>Логин</Form.Label>\n                        <Form.Control ref={username_form} type=\"text\" placeholder=\"Введите логин\"/>\n                        <Form.Text className=\"text-muted\">\n                            Логин пользователя выдается администратором.\n                        </Form.Text>\n                    </Form.Group>\n\n                    <Form.Group className=\"mb-3\" controlId=\"password\">\n                        <Form.Label>Пароль</Form.Label>\n                        <Form.Control ref={password_form} type=\"password\" placeholder=\"Введите пароль\"/>\n                    </Form.Group>\n\n                    <Form.Group className=\"mb-3\" controlId=\"formBasicCheckbox\">\n                        <Form.Check ref={remember_user} type=\"checkbox\" label=\"Запомнить на этом устройстве\"/>\n                    </Form.Group>\n\n                    <Button variant=\"primary\" type=\"submit\">\n                        Войти\n                    </Button>\n                </Form>\n            }\n        </>\n\n    );\n};\n\nexport default LoginForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}